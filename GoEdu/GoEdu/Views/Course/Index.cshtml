<<<<<<< HEAD
﻿@model List<CourseWithInstructorVM>
@{
    ViewData["Title"] = "Index";
}
<h1>كورساتي</h1>

<a class="btn btn-secondary" asp-action="New" asp-controller="Course">إضافة</a>

<table class="table table-hover table-bordered">
    <tr>
        <th>ID</th>
        <th>اسم الكورس</th>
        <th>السعر</th>
        <th>عدد الساعات</th>
        <th>المرحلة التعليمية</th>
        <th>السنة الدراسية</th>
        <th>الصف الدراسي</th>
        <th>عدد المحاضرات</th>
        <th>عدد الطلبة</th>
        <th>تعديل</th>
        <th>حذف</th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>@item.CrsID</td>
            <td>
                <a class="btn btn-secondary" asp-action="GetAll" asp-controller="Lecture" asp-route-id="@item.CrsID">@item.CrsName</a>
            </td>
            <td>@item.CrsPrice</td>
            <td>@item.CrsHours</td>
            <td>@item.CrsStage.GetDisplayName()</td>
            <td>@item.CrsLevel.GetDisplayName()</td>
            <td>@item.CrsSemester.GetDisplayName()</td>
            <td>@item.NumOfLecture</td>
            <td>@item.NumOfStudent</td>
            <td>
                <a class="btn btn-primary" asp-action="Edit" asp-controller="Course" asp-route-id="@item.CrsID">تعديل</a>
            </td>
            <td>
                <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteModal"
                        onclick="setDeleteId(@item.CrsID)">
                    حذف
                </button>
            </td>
        </tr>
    }
</table>



<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="deleteModalLabel">تأكيد الحذف</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                Did you want to delete this course
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">إلغاء</button>
                <a id="confirmDeleteBtn" href="#" class="btn btn-danger">حذف</a>
            </div>
        </div>
    </div>
</div>

<script>
    function setDeleteId(CrsID) {
        var deleteUrl = "/Course/Delete/" + CrsID;
        document.getElementById("confirmDeleteBtn").setAttribute("href", deleteUrl);
    }
</script>


<!-- Toast Notification -->
<div class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 1055;">
    <div id="deleteToast" class="toast align-items-center text-bg-success border-0 shadow" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="d-flex">
            <div class="toast-body">
                <i class="bi bi-check-circle-fill me-2"></i> تم الحذف بنجاح ! 
            </div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
    </div>
</div>

<script>
    @if (TempData["CourseDeleted"] != null)
    {
        <text>
                    document.addEventListener("DOMContentLoaded", function () {
                        var toastEl = document.getElementById('deleteToast');
                        var toast = new bootstrap.Toast(toastEl);
                        toast.show();
                    });
        </text>
    }
</script>

<!-- After Added New Course -->
@if (TempData["CourseCreated"] != null)
{
    <div class="alert alert-success alert-dismissible fade show mt-3" role="alert">
        @TempData["CourseCreated"]
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}
@model List<Course>

<h2>جميع الكورسات</h2>
<form asp-controller="Course" asp-action="Index" method="get"> 
    <input type="text" name="searchQuery" placeholder="ابحث عن كورس..." class="form-control" value="@Context.Request.Query["searchQuery"]" /> 
    <button type="submit" class="btn btn-primary mt-4">بحث</button>
</form>
<form method="get" class="mb-4 d-flex gap-3 align-items-end">
    <div>
        <label class="form-label">نوع الفلترة</label>
        <select name="filterBy" class="form-select" id="filterBy">
            <option value="instructorName">اسم المعلم</option>
            <option value="courseName">اسم الكورس</option>
        </select>
    </div>

    <div>
        <label class="form-label">الكلمة المفتاحية</label>
        <input type="text" name="searchQuery" class="form-control" placeholder="اكتب هنا..." value="@Context.Request.Query["searchQuery"]" />
    </div>

    <div>
        <button type="submit" class="btn btn-primary">فلتر</button>
    </div>
</form>




<table class="table">
    <thead>
        <tr>
            <th>اسم الكورس</th>

            <th>السعر</th>
            <th>عدد الساعات</th>
            <th>المستوى</th>
            <th>الفصل الدراسي</th>
            <th>المرحلة الدراسية</th>
            <th>المدرب</th>
            <th>الإجراءات</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var course in Model)
        {
            <tr>
                <td>@course.Name</td>

                <td>@course.Price</td>
                <td>@course.Hours</td>
                <td>@course.CourseLevel</td>
                <td>@course.Semester</td>
                <td>@course.StudentStage</td>
                <td>
                    @course.Instructor.Name
                <td>

                    <a href="/Course/Details">Details</a>
                </td>
            </tr>
        }
    </tbody>
</table>

<script>
    
    var filterBy = '@Context.Request.Query["filterBy"]';
    if (filterBy) {
        document.getElementById('filterBy').value = filterBy;
    }
</script>
>>>>>>> origin/main
